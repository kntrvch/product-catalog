<div class="container" *ngIf="category$ | async as category; else loading">
    <ol class="breadcrumb mt-5">
        <li class="breadcrumb-item"><a [routerLink]="['/']">Home</a></li>
        <li class="breadcrumb-item active">{{ category.name }}</li>
    </ol>
    <h1 class="mb-5">{{ category.name }}</h1>
    <div class="row row-cols-1 row-cols-lg-3 mb-5" *ngIf="category.products.items.length > 0; else noProducts">
        <div class="col" *ngFor="let product of category.products.items">
            <a class="text-decoration-none" [routerLink]="['/product', product._id]">
                <div class="card mb-3">
                    <img [src]="product.image.sourceUrl" class="card-img-top" [alt]="product.name">
                    <div class="card-body">
                        <h5 class="card-title">{{ product.name }}</h5>
                        <p class="card-text fw-lighter fs-6">{{ product.description }}</p>
                        <div class="fw-bold">${{ product.price }}</div>
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor"
                            viewBox="0 0 448 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.-->
                            <path
                                d="M438.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L338.8 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l306.7 0L233.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160z" />
                        </svg>
                    </div>
                </div>
            </a>
        </div>
    </div>
    <ng-template #noProducts>
        <div class="alert alert-primary text-center mb-5">
            There are no products in this category
        </div>
    </ng-template>
</div>

<ng-template #loading>
    <div class="d-flex justify-content-center align-items-center h-100 p-5">
        <div class="spinner-border" role="status" style="width: 3rem; height: 3rem;">
            <span class="visually-hidden">Loading...</span>
        </div>
    </div>
</ng-template>